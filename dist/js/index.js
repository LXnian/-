"use strict";function onNav(){$("#nav ul").on("click","li",function(){$("#nav ul li").removeClass("active"),$(this).addClass("active")})}function onli(){$("#main .banner>ul").on("mouseover","li",function(){$("#main ul li").removeClass("liHover"),$(this).addClass("liHover"),$(".menu").css("display","block")}),$("#main ul").on("mouseout","li",function(){$(this).removeClass("liHover"),$(".menu").css("display","none")}),$("#main .banner>ul").on("click","li",function(){var i=$(this).attr("data-id");$.ajax({url:"http://api.yuguoxy.com/api/shop/list/category",type:"get",data:{categoryId:i},success:function(i){$("#main .list ul").empty(),cartList(i.resultInfo.list)}})})}function getSearch(){$(".search button").on("click",function(){$.ajax({url:"http://api.yuguoxy.com/api/shop/search",type:"get",data:{keyword:$(".search input").val()},success:function(i){var t;1==i.resultCode?(t=i.resultInfo.list,$("#main .list ul").empty(),cartList(t)):-1==i.resultCode&&$("#main .list ul").html("未找到任何数据")}})})}function getHeadImg(){var i=JSON.parse(localStorage.getItem("user"));null!=i&&(headerImg=i.headerimg,$("#main .nine img").prop("src",headerImg))}function getSwiper(){$.ajax({url:"http://api.yuguoxy.com/api/shop/banner",type:"get",data:{},success:function(i){i=i.resultInfo.list.map(function(i){return'<div class="swiper-slide"><img src="'+i.url+'" alt=""></div>'}).join("");$(".swiper-wrapper").html(i),new Swiper(".swiper",{direction:"horizontal",loop:!0,autoplay:{delay:1e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",hideOnClick:!0}})}})}function getData(i){$.ajax({url:"http://api.yuguoxy.com/api/shop/list",type:"get",data:{pageNo:i,pageSize:8},success:function(i){cartList(i.resultInfo.list)}})}function detail(i){location.href="./detail.html?id="+i}function cartList(i){i=i.map(function(i){return'<li onclick="detail('+i.id+')">\n                        <img src="'+i.picture+'" alt="">\n                        <div class="bottom">\n                            <div class="one">'+i.shop+'</div>\n                            <div class="label">\n                                <div>淘宝</div>\n                                <div>包邮</div>\n                            </div>\n                            <div class="pricelabel">\n                                <div class="price">￥'+i.price+'</div>\n                                <div class="num">'+i.oldprice+'人已买</div>\n                                <div class="lab">'+i.categoryname+"</div>\n                            </div>\n                        </div>\n                    </li>"}).join("");$("#main .list ul").append(i)}function btnMore(){var i=1;$(".list>button").on("click",function(){getData(++i)})}onNav(),onli(),$(".top button").on("click",function(){location.href="./cart.html"}),getSearch(),getHeadImg(),getSwiper(),getData(1),btnMore();